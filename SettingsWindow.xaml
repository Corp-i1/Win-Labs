<local:BaseWindow 
        xmlns:local="clr-namespace:Win_Labs"
        x:Class="Win_Labs.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings Menu" 
        Height="400" Width="600"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Icon="{Binding IconIcoPath, RelativeSource={RelativeSource AncestorType=local:BaseWindow}}"
        MouseDown="Window_MouseDown">

    <!-- 
        Settings Window Layout:
        - Left: Sidebar for categories
        - Right: Main content area for selected category's settings
        - Bottom: Persistent buttons
    -->
    <Grid Margin="1">
        <Grid.RowDefinitions>
            <RowDefinition Height="25" /> <!-- Top bar -->
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Top Bar -->
        <DockPanel Grid.Row="0" Grid.ColumnSpan="2" Background="#222">
            <Image x:Name="TitleBarIcon" Width="25" Height="25" Source="\resources\Icons\Win-Labs_Logo-256x256.ico" />
            <TextBlock Text="Settings" VerticalAlignment="Center" Foreground="LightGray" FontWeight="Bold" Margin="8,0,0,0"/>
            <Grid HorizontalAlignment="Right" Background="#222">
                <Image x:Name="Close_Button" MouseDown="CloseButton_Click" Width="20" Height="20" Source="/resources/Icons/Close_Icon_White.png" Margin="0,0,4,0"/>
            </Grid>
        </DockPanel>

        <!-- Sidebar: Category List -->
        <ListBox x:Name="CategoryListBox"
         Grid.Column="0"
         Grid.Row="1"
         SelectionChanged="CategoryListBox_SelectionChanged"
         SelectedIndex="0"
         Margin="0,0,0,0"
         Background="Gray">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Margin" Value="0,1"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListBoxItem">
                                <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                BorderThickness="0"
                                SnapsToDevicePixels="true">
                                    <ContentPresenter
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RecognizesAccessKey="True"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="#536878"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="#666"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Background" Value="#555"/>
                    <Setter Property="Foreground" Value="White"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBoxItem Content="General" />
            <ListBoxItem Content="Appearance" />
            <ListBoxItem Content="Advanced" />
        </ListBox>

        <!-- Main Content: Category Settings -->
        <ContentControl x:Name="CategoryContentControl"
                        Grid.Column="1"
                        Grid.Row="1"
                        />

        <!-- Cancel button on the far left -->
        <Button x:Name="CancelButton" Content="Cancel" Width="100" Margin="0,0,0,0" Grid.Row="2" HorizontalAlignment="Left" Grid.Column="0" Click="CancelButton_Click" />
        <!-- Button Row -->
        <Grid Grid.Column="1" Grid.Row="2" Margin="0,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Spacer (Grid.Column=1) -->
            <!-- Save button second from right -->
            <Button x:Name="SaveButton" Content="Save" Width="100" Margin="0,0,0,0" Grid.Column="2" Click="SaveButton_Click"/>
            <!-- Save & Exit button on the far right -->
            <Button x:Name="SaveAndExitButton" Content="Save &amp; Exit" Width="100" Margin="0,0,0,0" Grid.Column="3" Click="SaveAndExitButton_Click"/>
        </Grid>
        <Frame x:Name="MainFrame">

        </Frame>
    </Grid>

</local:BaseWindow>
